<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Remix BTC Pro — Trust Wallet (Simulation)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
body{
  margin:0;background:#0b0b0b;color:#ddd;
  font-family:system-ui,-apple-system,BlinkMacSystemFont
}
.topbar{
  display:flex;gap:10px;align-items:center;
  padding:10px;background:#111;border-bottom:1px solid #222
}
button,select{
  background:#1f1f1f;color:#ddd;border:1px solid #333;
  padding:6px 12px;border-radius:8px;cursor:pointer
}
button:disabled{opacity:.4;cursor:not-allowed}
.badge{padding:6px 10px;border-radius:999px;font-size:12px}
.badge.off{background:#444}
.badge.on{background:#0a7;color:#fff}
.main{padding:20px}
.editor{
  background:#111;border:1px solid #222;border-radius:10px;
  padding:10px;height:180px;color:#9cdcfe;
  font-family:monospace;white-space:pre;width:100%
}

/* Console */
.console{
  background:#0e0e0e;border:1px solid #222;
  border-radius:10px;margin-top:20px
}
.console-header{
  display:flex;justify-content:space-between;
  padding:8px 12px;background:#151515;color:#aaa;
  font-size:13px;border-bottom:1px solid #222
}
.console-body{
  padding:10px;height:260px;overflow-y:auto;
  font-family:monospace;font-size:13px
}
.log.info{color:#9cdcfe}
.log.ok{color:#4ec9b0}
.log.warn{color:#dcdcaa}
.log.err{color:#f44747}
.time{color:#666;margin-right:6px}

/* Modal */
.modal{
  position:fixed;inset:0;background:rgba(0,0,0,.7);
  display:none;align-items:center;justify-content:center
}
.modal-box{
  background:#111;border:1px solid #333;border-radius:12px;
  padding:20px;width:340px
}
.modal h3{margin-top:0}
.modal p{font-size:14px;color:#bbb}
.modal-actions{display:flex;gap:10px;justify-content:flex-end}
</style>

<!-- HARD BLOCK TX -->
<script>
(function(){
  const blocked=new Set([
    "eth_sendTransaction","eth_sign","personal_sign",
    "eth_signTypedData","eth_signTypedData_v4"
  ]);
  const hook=()=>{
    if(!window.ethereum?.request) return;
    const o=window.ethereum.request.bind(window.ethereum);
    window.ethereum.request=(a)=>{
      if(blocked.has(a?.method))
        return Promise.reject(new Error("TX disabled (Simulation)"));
      return o(a);
    };
  };
  if(window.ethereum) hook();
  window.addEventListener("ethereum#initialized",hook,{once:true});
})();
</script>
</head>

<body>

<div class="topbar">
  <span id="badge" class="badge off">Wallet not connected</span>
  <button id="connectBtn">Connect Trust</button>
  <button id="disconnectBtn" disabled>Disconnect</button>
  <span class="badge off">BTC • SIMULATION</span>
  <button id="deployBtn" disabled>Deploy</button>
</div>

<div class="main">
<textarea id="editor" class="editor">// Simulation only
contract BTCMock {
    function deploy() public pure returns (bool) {
        return true;
    }
}</textarea>

<div class="console">
  <div class="console-header">
    <span>Remix Console</span>
    <span>Network: BTC (MockNet)</span>
  </div>
  <div id="consoleBody" class="console-body"></div>
</div>
</div>

<!-- GAS MODAL -->
<div id="gasModal" class="modal">
  <div class="modal-box">
    <h3>Deployment Gas</h3>
    <p id="gasInfo"></p>
    <div class="modal-actions">
      <button onclick="closeModal()">Close</button>
      <button id="confirmBtn" onclick="confirmDeploy()">Confirm</button>
    </div>
  </div>
</div>

<script>
let provider=null;

function log(msg,type="info"){
  const b=document.getElementById("consoleBody");
  const d=document.createElement("div");
  d.className="log "+type;
  d.innerHTML=`<span class="time">[${new Date().toLocaleTimeString()}]</span>${msg}`;
  b.appendChild(d); b.scrollTop=b.scrollHeight;
}

async function detectProvider(){
  if(!window.ethereum) throw new Error("No injected wallet");
  if(Array.isArray(window.ethereum.providers)){
    return window.ethereum.providers.find(p=>p.isTrust) 
      || window.ethereum.providers[0];
  }
  return window.ethereum;
}

connectBtn.onclick=async()=>{
  try{
    log("Detecting wallet…");
    provider=await detectProvider();
    await provider.request({method:"eth_requestAccounts"});
    log("Trust Wallet connected","ok");
    badge.className="badge on";
    badge.innerText="Wallet Connected (Demo)";
    deployBtn.disabled=false;
    disconnectBtn.disabled=false;
    connectBtn.disabled=true;
  }catch(e){
    log(e.message,"err");
  }
};

disconnectBtn.onclick=()=>{
  log("Wallet disconnected","warn");
  badge.className="badge off";
  badge.innerText="Wallet not connected";
  deployBtn.disabled=true;
  connectBtn.disabled=false;
};

deployBtn.onclick=()=>{
  log("Preparing deployment…");
  document.getElementById("gasInfo").innerText =
    "Estimated Gas: 200 BTC ≈ 7000 USDT";
  document.getElementById("confirmBtn").disabled=false;
  document.getElementById("gasModal").style.display="flex";
};

function confirmDeploy(){
  const btn=document.getElementById("confirmBtn");
  btn.disabled=true;
  log("Confirm clicked","warn");
  setTimeout(()=>{
    log("⚠ Token frozen due to blockchain security rules","err");
  },1200);
}

function closeModal(){
  document.getElementById("gasModal").style.display="none";
}
</script>

</body>
</html>
