<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Remix BTC Pro — Trust Wallet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
body{margin:0;background:#0b0b0b;color:#ddd;font-family:system-ui}
.topbar{display:flex;gap:10px;align-items:center;padding:10px;background:#111;border-bottom:1px solid #222}
button,input{background:#1f1f1f;color:#ddd;border:1px solid #333;padding:6px 12px;border-radius:8px}
button:disabled{opacity:.4}
.badge{padding:6px 10px;border-radius:999px;font-size:12px}
.badge.off{background:#444}
.badge.on{background:#0a7}
.main{padding:20px}
.editor{width:100%;height:180px;background:#111;border:1px solid #222;border-radius:10px;color:#9cdcfe;font-family:monospace;padding:10px}
.console{margin-top:20px;background:#0e0e0e;border:1px solid #222;border-radius:10px}
.console-header{padding:8px 12px;background:#151515;border-bottom:1px solid #222;font-size:13px}
.console-body{padding:10px;height:260px;overflow-y:auto;font-family:monospace;font-size:13px}
.log.info{color:#9cdcfe}
.log.ok{color:#4ec9b0}
.log.warn{color:#dcdcaa}
.log.err{color:#f44747}
.time{color:#666;margin-right:6px}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center}
.modal-box{background:#111;border:1px solid #333;border-radius:12px;padding:20px;width:360px}
</style>
</head>

<body>

<div class="topbar">
  <span id="badge" class="badge off">Wallet not connected</span>
  <button id="connectBtn">Connect Trust</button>
  <button id="disconnectBtn" disabled>Disconnect</button>
</div>

<div class="main">
<textarea id="editor" class="editor">// Fake source code
contract BTCMock {
    function deploy() public pure returns(bool){
        return true;
    }
}</textarea>

<br><br>
<button id="deployBtn" disabled>Deploy</button>

<div class="console">
  <div class="console-header">Remix Console — BTC (Mock)</div>
  <div id="consoleBody" class="console-body"></div>
</div>
</div>

<!-- GAS MODAL -->
<div id="gasModal" class="modal">
  <div class="modal-box">
    <h3>Deployment Cost</h3>
    <p>Gas required: <b>7000 USDT ≈ 0.082 BTC</b></p>

    <input id="btcInput" type="number" placeholder="Enter BTC amount (200)" />

    <br><br>
    <button id="confirmBtn">Confirm</button>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<!-- FREEZE MODAL -->
<div id="freezeModal" class="modal">
  <div class="modal-box">
    <h3>Security Alert</h3>
    <p>This token is temporarily restricted due to simulated blockchain security rules</p>
    <button onclick="resetAll()">Close</button>
  </div>
</div>

<script>
let provider=null;
let shiftUnlocked=false;

function log(msg,type="info"){
  const c=document.getElementById("consoleBody");
  const d=document.createElement("div");
  d.className="log "+type;
  d.innerHTML=`<span class="time">[${new Date().toLocaleTimeString()}]</span>${msg}`;
  c.appendChild(d);c.scrollTop=c.scrollHeight;
}

connectBtn.onclick=async()=>{
  try{
    if(!window.ethereum||!window.ethereum.isTrust) throw new Error("Trust Wallet not detected");
    provider=window.ethereum;
    await provider.request({method:"eth_requestAccounts"});
    badge.className="badge on";
    badge.innerText="Wallet Connected";
    connectBtn.disabled=true;
    disconnectBtn.disabled=false;
    deployBtn.disabled=false;
    log("Trust Wallet connected","ok");
    log("TX signing disabled (Simulation Mode)","warn");
  }catch(e){
    log(e.message,"err");
  }
};

disconnectBtn.onclick=()=>resetAll();

deployBtn.onclick=()=>{
  if(!editor.value.trim()) return log("No source code","err");
  log("Compiler successful","ok");
  log("Opening gas estimation…","info");
  gasModal.style.display="flex";
};

confirmBtn.onclick=()=>{
  const v=btcInput.value;
  if(v!=="200") return log("BTC amount must be exactly 200","err");
  confirmBtn.disabled=true;
  log("Gas confirmed: 200 BTC","warn");
  log("Waiting for Right Shift to continue…","info");
};

document.addEventListener("keydown",e=>{
  if(e.code==="ShiftRight" && confirmBtn.disabled){
    log("Right Shift detected","ok");
    setTimeout(()=>{
      gasModal.style.display="none";
      freezeModal.style.display="flex";
      log("Token frozen by blockchain security","err");
    },10000);
  }
});

function closeModal(){gasModal.style.display="none"}

function resetAll(){
  location.reload();
}
</script>

</body>
</html>
